<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <title>Tabla con Bootstrap</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <style>
        /* Estilos personalizados */
        .centrar-texto {
            text-align: center;
        }

        .negrita {
            font-weight: bold;
        }
    </style>
    <style>
        /* Estilos personalizados */
        .centrar-texto {
            text-align: center;
        }

        .negrita2 {
            font-weight: bold;
        }
    </style>
</head>

<body>

    <nav class="navbar navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="#">FORMATO PRESENTACIÓN DE INFORME DE SEMILLEROS DE INVESTIGACIÓN </a>
        </div>
    </nav>

    <div class="container mt-4 text-center">
        <div class="container mt-4 text-center">
            <label for="" class="centrar-texto negrita">INFORMACION GENERAL</label>
            <hr>
            <form>
                <div class="form-group row">
                    <label for="staticFacultad" class="col-sm-2 col-form-label">Facultad:</label>
                    <div class="col-sm-4">
                        <input type="text" readonly class="form-control-plaintext" id="staticFacultad" value="">
                    </div>
                    <label for="staticFecha" class="col-sm-2 col-form-label">Fecha:</label>
                    <div class="col-sm-4">
                        <input type="text" readonly class="form-control-plaintext" id="staticFecha" value="17/11/2023">
                    </div>
                </div>

            </form>

            <hr>
        </div>

        <div class="form-group row">
            <label for="staticPrograma" class="col-sm-2 col-form-label">Programa:</label>
            <div class="col-sm-10">
                <input type="text" readonly class="form-control-plaintext" id="staticPrograma" value="">
            </div>
        </div>
        <hr>
        <div class="form-group row">
            <label for="staticGrupoI" class="col-sm-2 col-form-label">Nombre del grupo de investigacion:</label>
            <div class="col-sm-10">
                <input type="text" readonly class="form-control-plaintext" id="staticGrupoI" value="">
            </div>
        </div>

        <hr>

        <form>
            <div class="form-group row">
                <label for="staticNombreS" class="col-sm-2 col-form-label">Nombre del semillero:</label>
                <div class="col-sm-4">
                    <input type="text" readonly class="form-control-plaintext" id="staticNombreS" value="">
                </div>
                <label for="staticPeriodoA" class="col-sm-2 col-form-label">Periodo Academico:</label>
                <div class="col-sm-4">
                    <input type="text" readonly class="form-control-plaintext" id="staticPeriodoA" value="2023-2">
                </div>
            </div>

        </form>
        <hr>
        <div class="form-group row">
            <label for="staticDocenteL" class="col-sm-2 col-form-label">Docente lider del semillero:</label>
            <div class="col-sm-10">
                <input type="text" readonly class="form-control-plaintext" id="staticDocenteL" value="">
            </div>
        </div>
        <hr>
        <div class="form-group row">
            <label for="staticGrupoI" class="col-sm-2 col-form-label">Linea de investigacion:</label>
            <div class="col-sm-10">
                <input type="text" readonly class="form-control-plaintext" id="staticGrupoI" value="">
            </div>
        </div>
        </form>
        <hr>
        <form>
            <div class="form-group row">
                <label for="staticNombreS" class="col-sm-2 col-form-label">Categoria Colciencias:</label>
                <div class="col-sm-4">
                    <input type="text" readonly class="form-control-plaintext" id="staticNombreS" value="">
                </div>
                <label for="staticPeriodoA" class="col-sm-2 col-form-label">Codigo Colciencias:</label>
                <div class="col-sm-4">
                    <input type="text" readonly class="form-control-plaintext" id="staticPeriodoA" value="">
                </div>
            </div>
            <hr>
            <div class="container">

                <label for="" class="centrar-texto negrita">PRESENTACIÓN DE INFORME DE RESULTADOS (USO EXCLUSIVO DEL
                    GRUPO DE
                    INVESTIGACIÓN)</label>
            </div>
            <hr>
        </form>
        <table id="tablaProyectos" class="table table-striped mt-4">
            <thead>
                <tr>
                    <th>Nombre del proyecto </th>
                    <th>Objetivos del Proyecto</th>
                    <th>Resultados Obtenidos</th>
                    <th> Estudiantes que intervienen</th>
                </tr>
            </thead>
            <tbody>

            </tbody>
        </table>
        <hr>
        <div class="form-group row">
            <label for="staticObservaciones" class="col-sm-2 col-form-label">Observaciones:</label>
            <br>

            <label for="" class="centrar-texto negrita">SEGUIMIENTO DE LA ACTIVIDAD INVESTIGATIVA DE SEMILLEROS DE
                INVESTIGACIÓN</label>
            <br>
            <label for="" class="centrar-texto negrita">Observaciones generales</label>
            <hr>
            <br>
            <br>
            <br>
            <hr>
            <label for="" class="centrar-texto negrita">USO EXCLUSIVO LÍDER DEL GRUPO</label>
            <br>
            <hr>
            <form>
                <div class="form-group row">
                    <label for="staticNS" class="col-sm-2 col-form-label">Firma docente lider del
                        semillero:</label>
                    <div class="col-sm-4">
                        <input type="text" readonly class="form-control-plaintext" id="staticNS" value="">
                    </div>
                    <label for="staticPA" class="col-sm-2 col-form-label">Manifiesto la veracidad de toda la
                        información contemplada en el presente documento en concordancia con los requisitos solicitados
                        y en beneficio de la Universidad Libre</label>
                    <div class="col-sm-4">
                        <input type="text" readonly class="form-control-plaintext" id="staticPA" value="">
                    </div>
                </div>

            </form>
            <hr>
            <label for="" class="centrar-texto negrita">USO EXCLUSIVO DEL CENTRO DE INVESTIGACIONES DE FACULTAD</label>
            <br>
            <hr>
            <label for="" class="centrar-texto negrita">Registro del tramite</label>
            <hr>

        </div>
        <label for="staticPeriodoA" class="col-sm-2 col-form-label">Validacion del tramite:</label>
        </form>

        <div class="form-group row">

            <label for="staticGrupoI" class="col-sm-2 col-form-label">Nombre:</label>
            <div class="col-sm-10">
                <input type="text" readonly class="form-control-plaintext" id="staticGrupoI" value="">
            </div>


            <label for="staticGrupoI" class="col-sm-2 col-form-label">Fecha:</label>
            <div class="col-sm-10">
                <input type="text" readonly class="form-control-plaintext" id="staticGrupoI" value="">
            </div>
            <label for="staticGrupoI" class="col-sm-2 col-form-label">Firma:</label>

        </div>
        </form>
        <button id="consultarProyectos" class="btn btn-primary">Consultar proyectos</button>
        <button id="regresar" class="btn btn-primary">Regresar</button>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
    <script>
        document.getElementById("consultarProyectos").addEventListener("click", function () {
            let endpoint = '/FiltroProyecto';
            let endpoint2 = '/traerSemilleros';

            // Recuperar el códigoSemillero almacenado en sessionStorage
            var codigoSemillero = sessionStorage.getItem('codigoSemillero');
            // Recuperar el códigoSemillero almacenado en sessionStorage
            var facultadSemillero = sessionStorage.getItem('facultadSemillero');
            document.getElementById("staticFacultad").value = facultadSemillero;
            //   console.log("enviado a axius" + codigoSemillero);

            var programaSemillero = sessionStorage.getItem('programaSemillero');
            document.getElementById("staticPrograma").value = programaSemillero;
            axios.get(endpoint + '?idSemillero=' + encodeURIComponent(codigoSemillero))
                .then(function (response) {
                    let data = response.data;

                    let tablaProyectos = document.getElementById("tablaProyectos").getElementsByTagName("tbody")[0];

                    // Limpia el contenido actual de la tabla
                    tablaProyectos.innerHTML = '';

                    // Itera a través de los datos y agrega filas a la tabla
                    for (let key in data) {
                        if (data.hasOwnProperty(key)) {
                            let proyectos = data[key];
                            let row = tablaProyectos.insertRow();
                            let cellCodigoP = row.insertCell(0);
                            let cellNombreP = row.insertCell(1);
                            let cellfechaInicioP = row.insertCell(2);
                            let cellfechaFinalP = row.insertCell(3);
                            let celldescripcionP = row.insertCell(4);
                            let DetallesP = row.insertCell(5);

                            cellCodigoP.textContent = proyectos.codProyecto;
                            cellNombreP.textContent = proyectos.nombreProyecto;
                            cellfechaInicioP.textContent = proyectos.fechaInicio;
                            cellfechaFinalP.textContent = proyectos.fechaFinal;
                            celldescripcionP.textContent = proyectos.descripcion;

                            // Crear enlace para detalles y almacenar el código en sessionStorage
                            let detallesLink = document.createElement("a");
                            detallesLink.textContent = "Detalles";
                            detallesLink.href = "Proyectos";  // Página destino
                            detallesLink.onclick = function () {
                                sessionStorage.setItem('codProyecto', proyectos.codProyecto);
                                console.log("enviado" + proyectos.codProyecto)
                            };

                            detallesLink.classList.add("btn", "btn-info");

                            DetallesP.appendChild(detallesLink);
                            axios.get(endpoint2 + '?idSemillero=' + encodeURIComponent(codigoSemillero))
                                .then(function (response) {
                                    let data2 = response.data;
                                    // Llenar la información de la facultad en el campo facultad
                                    //  document.getElementById("staticFacultad").value = data2.idSemilleroFk;

                                })
                                .catch(function (error) {
                                    console.log(error);
                                });


                        }
                    }
                })
                .catch(function (error) {
                    console.log(error);
                });
        });
        //Regresar
        document.getElementById("regresar").addEventListener("click", function () {
            // Redirigir a otra página Semilleros HTML
            window.location.href = '/';
        });

    </script>


</body>

</html>